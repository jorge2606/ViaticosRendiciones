<nav *ngIf="isLogged | async" class="navbar navbar-expand-lg navbar-dark bg-dark mb-3 font-weight-light">
  <button 
      class="navbar-toggler ml-auto" 
      type="button" 
      data-toggle="collapse" 
      data-target="#navbarNav" 
      (click)="showNavar = !showNavar"
      aria-controls="navbarNav" 
      [attr.aria-expanded]="!showNavar"
      aria-expanded="false" 
      aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="collapseBasic" [collapse]="showNavar">
      <ul class="navbar-nav">
          <li class="nav-item">
            <a 
              [routerLinkActive]="['active']"
              placement="bottom" 
              ngbTooltip="Ir al menú principal" 
              [routerLink]="['/']"
              [routerLinkActiveOptions]="{exact : true}" 
              class="nav-item text-white nav-link"
              href="#" >
              <fa-icon icon="home"></fa-icon> Inicio
            </a>
          </li>
      </ul>   
      <ul class="navbar-nav mr-auto">
        <li class="nav-item" *ngIf="showTabUsers">
          <a 
            placement="bottom" 
            ngbTooltip="Ver el listado de todos los usuarios" 
            routerLink="/users"
            [routerLinkActive]="['active']"
            class="nav-item text-white nav-link"
            href="#">
            <fa-icon icon="users"></fa-icon> Usuarios 
          </a>
        </li>

        <li class="nav-item" *ngIf="showTabRoles">
          <!--<a style="color: white;" class="nav-item nav-link active" href="#" routerLink="/login">Login</a>-->
          <a  
            placement="bottom" 
            ngbTooltip="Ver el listado de todos los roles" 
            class="nav-item text-white nav-link" 
            href="#" 
            [routerLinkActive]="['active']"
            routerLink="/roles">
            <fa-icon icon="key"></fa-icon> Roles
          </a>
        </li>

        <li class="nav-item" *ngIf="showTabCategories">
          <a
            placement="bottom" 
            ngbTooltip="Ver el listado de todas las categorías" 
            class="nav-item text-white nav-link" 
            href="#"
            [routerLinkActive]="['active']"
            routerLink="/category">
            <fa-icon icon="tags"></fa-icon> Categorías
          </a>
        </li>

        <li class="nav-item" *ngIf="showTabDistribution">
          <!--<a style="color: white;" class="nav-item nav-link active" href="#" routerLink="/login">Login</a>-->
          <a
            placement="bottom" 
            [routerLinkActive]="['active']"
            ngbTooltip="Ver el listado de todas las reparticiones" 
            class="nav-item text-white nav-link"
            href="#" 
            routerLink="/distribution">
            <fa-icon icon="building"></fa-icon> Reparticiones
          </a>
        </li>

        <li *ngIf="showTabTransports" class="nav-item">
            <!--<a style="color: white;" class="nav-item nav-link active" href="#" routerLink="/login">Login</a>-->
            <a      
              placement="bottom" 
              ngbTooltip="Ver el listado de todos los transportes" 
              class="nav-item text-white nav-link"
              href="#" 
              [routerLinkActive]="['active']"
              routerLink="/transport">
              <fa-icon icon="car"></fa-icon> Transporte
            </a>
        </li>

        <li *ngIf="showTabExpenditures" class="nav-item">
          <!--<a style="color: white;" class="nav-item nav-link active" href="#" routerLink="/login">Login</a>-->
          <a       
            placement="bottom" 
            ngbTooltip="Ver el listado de todos los tipos de gasto" 
            class="nav-item text-white nav-link" 
            href="#"
            [routerLinkActive]="['active']"
            routerLink="/expenditure">
            <fa-icon icon="money-check-alt"></fa-icon> Gastos
          </a>
        </li>

        <li *ngIf="showTabOrganism" class="nav-item">
          <!--<a style="color: white;" class="nav-item nav-link active" href="#" routerLink="/login">Login</a>-->
          <a         
            placement="bottom" 
            ngbTooltip="Ver el listado de todos los organismos" 
            class="nav-item text-white nav-link" 
            href="#" 
            [routerLinkActive]="['active']"
            routerLink="/organism">
            <fa-icon icon="sitemap"></fa-icon> Organismos
          </a>
        </li>


        <li *ngIf="showTabSolicitation" class="nav-item">
            <div class="d-inline-block" ngbDropdown #myDropDown="ngbDropdown">
                <a  
                  href="#"
                  routerLink="{{router.url}}"
                  class="nav-item text-white nav-link" 
                  id="dropdownManual" 
                  ngbDropdownAnchor 
                  (focus)="myDropDown.open()">
                  Solicitudes
                </a>
              <div ngbDropdownMenu aria-labelledby="dropdownManual" class="dropdown-menu show p-1">
                <div *ngIf="createSolicitation" class="card small mb-1">
                    <button
                      style="cursor:pointer;"
                      placement="bottom" 
                      [routerLinkActive]="['active']"
                      ngbTooltip="crear una solicitud de viático" 
                      routerLink="/SolicitationSubsidy/agent/create"
                      class="dropdown-item">
                      <fa-icon icon="file-signature"></fa-icon> Crear solicitud de viático
                    </button>
                </div>

                <div *ngIf="createRefund" class="card small mb-1">
                    <button 
                    style="cursor:pointer;"
                    placement="bottom" 
                    [routerLinkActive]="['active']"
                    ngbTooltip="crear una solicitud de viático" 
                    routerLink="/SolicitationSubsidy/agent/repayment"
                    class="dropdown-item">
                    <fa-icon icon="file-signature"></fa-icon> Crear Reintegro
                  </button>
                </div>

                <div *ngIf="moderateSolicitation" class="card small mb-1">
                    <button
                      style="cursor:pointer;"
                      placement="bottom" 
                      [routerLinkActive]="['active']"
                      ngbTooltip="Moderar solicitudes de viático" 
                      routerLink="/SolicitationSubsidy/agent/supervisor/solicitationSubsidies/{{isRefund.not}}"
                      class="dropdown-item">
                      <fa-icon icon="file-signature"></fa-icon> Moderar Anticipos
                    </button>
                </div>

                <div *ngIf="moderateRefund" class="card small mb-1">
                    <button
                      style="cursor:pointer;"
                      placement="bottom" 
                      [routerLinkActive]="['active']"
                      ngbTooltip="Moderar solicitudes de reintegro" 
                      routerLink="/SolicitationSubsidy/agent/supervisor/refunds/{{isRefund.yes}}"
                      class="dropdown-item">
                      <fa-icon icon="file-signature"></fa-icon> Moderar solicitudes de reintegro
                    </button>
                </div>

                <div *ngIf="moderateViewRefund" class="card small mb-1">
                    <button 
                    style="cursor:pointer;"
                    placement="bottom" 
                    [routerLinkActive]="['active']"
                    ngbTooltip="Listado de reintegros" 
                    routerLink="/SolicitationSubsidy/agent/supervisor/refunds/{{isRefund.yes}}"
                    class="dropdown-item">
                    <fa-icon icon="list-ul"></fa-icon> Listado de reintegros
                  </button>
                </div>

                <div *ngIf="moderateViewSolicitation" class="card small mb-1">
                  <button 
                    style="cursor:pointer;"
                    placement="bottom" 
                    ngbTooltip="Listado de mis solicitudes de viático"
                    [routerLinkActive]="['active']"
                    [routerLinkActiveOptions]="{exact : true}"
                    routerLink="/SolicitationSubsidy/agent"
                    class="dropdown-item">
                    <fa-icon icon="list-ul"></fa-icon> Listado de mis solicitudes
                  </button>
                </div>

              </div>
            </div>
          </li>

        <li *ngIf="showTabHolidays" class="nav-item">
            <a    
              [routerLinkActive]="['active']"
              placement="bottom"
              ngbTooltip="Ver el listado de los días no laborables"          
              routerLink="/holidays" 
              class="nav-item text-white nav-link" 
              href="#">
              <fa-icon icon="calendar"></fa-icon> Feriados
            </a>
        </li>

    </ul>

    <ul class="navbar-nav ml-auto small">
      <li class="dropdown-small">
        <div class="d-inline-block pull-right" ngbDropdown #myDrop="ngbDropdown" placement="bottom-right">
          <button *ngIf="cantNotif == 0" class="btn btn-outline-light bell-size" id="dropdownManualNotif" ngbDropdownToggle>
            <fa-icon class="fa-lg" style="color: dodgerblue;" icon="bell"></fa-icon>
            <!-- <span style="background-color:blue;" class="badge badge-primary badge-pill">{{notification.length}}</span>-->
          </button>
          <button *ngIf="cantNotif != 0" class="btn btn-outline-light bell-size" id="dropdownManualNotif" 
              ngbDropdownToggle (focus)="myDrop.open()">
              <fa-icon  class="fa-lg" style="color:red; margin-left: -3px;" icon="bell"></fa-icon>
              <span style="background-color:red; margin-left: -3px;" class="badge badge-primary badge-pill">
                {{notification.length}}+
              </span>
          </button>
          <div ngbDropdownMenu aria-labelledby="dropdownManualNotif" class="p-1" style="width: max-content;">
              <div class="card p-2">
                <ul *ngIf="cantNotif == 0" class="dropdown-item text-center small alert alert-primary h-3">
                      No hay notificaciones nuevas
                </ul>

                <button 
                  style="white-space :normal; cursor : pointer;" 
                  *ngFor="let j of notification" 
                  class="dropdown-item small alert" 
                  [ngClass]="{'alert-light h-0 p-1 mb-1': j.read,'alert-success h-3 p-1 mb-1' : !j.read}"
                  (click)="seeThisNotification(j)">
                  <p style="font-size: 11px">{{j.textData}}</p>
                </button>
                <a href="#" routerLink="{{router.url}}" (click)="seeAllNotification()" class="small text-left seeAllLink" 
                  style="text-decoration: none; padding-left: 10px;">
                    ver todos ({{notification.length}})
                </a>
              </div>
          </div>
        </div>
      </li>

      
      <li class="dropdown small ml-1">
          <div class="d-inline-block pull-right" ngbDropdown #myDropCloseSession="ngbDropdown" placement="bottom-right">
              <button class="btn btn-outline-light bell-size" id="dropdownManual" ngbDropdownToggle>
              <!-- <fa-icon icon="user"></fa-icon>-->
                <img class="rounded-circle" src="{{urlImage}}" alt="">
              </button>
              <div ngbDropdownMenu aria-labelledby="dropdownManual" style="background-color:mintcream;" 
                  class="pl-1 pr-1">
                  <div class="small card" style="padding : 6px;">
                      <span *ngFor="let rol of rolesNames"><u> {{rol.normalizedName}} </u></span>
                      <span>{{lastName}}, {{firstName}}</span>
                      <span style="font-size: 11px">{{userName}}</span> 
                  </div>

                  <div class="card mt-1">
                    <button 
                      placement="left" 
                      ngbTooltip="Editar información personal" 
                      routerLink="/settingUser/{{idUser}}" 
                      class="dropdown-item small pointer"
                      style="padding : 6px;">
                        <fa-icon class="fa-lg" icon="address-card"></fa-icon> Mi Perfil
                    </button>
                  </div>

                  <div class="card mt-1">
                      <button 
                        placement="left" 
                        ngbTooltip="Salir del sistema" 
                        (click)="logout()" 
                        class="dropdown-item small pointer"
                        style="padding : 6px;">
                      <fa-icon class="fa-lg" icon="sign-out-alt"></fa-icon> Cerrar Sesión
                    </button>
                  </div>

              </div>
          </div>
      </li>   
    </ul>
  </div>

</nav>

<nvs-ngx-breadcrumbs *ngIf="isloggedUser"></nvs-ngx-breadcrumbs>
<router-outlet class="small"></router-outlet>